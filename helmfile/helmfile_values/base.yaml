helmDefaults:
  createNamespace: false
  atomic: true
  wait: true

 
environments:
  .defaults:
    values:
      - &defaults
        remoteCharts: false
        chartPath: ../../../on-premise-helm-charts
        chartVersion: UNDEFINED
        namespace: UNDEFINED
        kubeContext: UNDEFINED
  test:
    values:
      - << : *defaults
      - chartVersion: 1.7.0 # актуальная версия релиза
      - namespace: devops-on-premise # namespace k8s для деплоя сервисов 2gis
      - kubeContext: 2gis-staging # имя контекста k8s для доступа к кластеру
        apiKey: API_KEY # API-ключ для доступа к сервисам поиска. Подробнее см. в документации сервиса API Keys.
        ingress:
          enabled: true # включение ингресса
          domain: on-premise.2gis.dev # домен ингресса
          protocol: https # протокол ингресса http или https
          secretName: on-prem.2gis.dev-tls # указать k8s secrets, содержащий сертификат для https, если будет использоваться https

  prod:
    values:
      - << : *defaults
      - namespace: 2gis-on-premise 
      - kubeContext: prod-cluster 
        ingress:
          enabled: true 
          domain: example.com 
          protocol: https 
          secretName: secret_tls 
