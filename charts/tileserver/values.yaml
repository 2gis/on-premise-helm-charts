---

# manifestPath -- Path to the manifest in S3-like storage. The manifest is downloaded via the dgctl utility
manifestPath: manifests/1635402744.json

serviceName: tileserver-api

name: tileserver
type: web

cassandra:
  # -- List of available Cassandra database nodes
  hosts: []

  # -- Replication factor for Cassandra
  replicaFactor: 1

  # -- Consistency level for database read queries
  consistencyLevelRead: ONE

  # -- Consistency level for database write queries
  consistencyLevelWrite: ONE

api:

  # -- The path to the docker image. Must have a path to your private docker registry
  image: 2gis/tileserver
  # -- Tag with application version
  tag: v1.0.0
  pullPolicy: IfNotPresent

  terminationGracePeriodSeconds: 30

  labels: {}
  annotations: {}

  replicaCount: 3
  revisionHistory: 1
  resources: {}
  nodeSelector: {}
  affinity: {}
  tolerations: {}
  imagePullSecrets: {}
  strategy:
    rollingUpdate:
      maxUnavailable: 0
      maxSurge: 1

  service:
    port: 80
    type: ClusterIP
    annotations: {}
    labels: {}

  ingress:
    enabled: false

    className: nginx
    tls: []
    hosts:
      - host: tileserver.loc
        paths:
          - path: /

  pdb:
    enabled: true
    maxUnavailable: 1

  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 1
    targetCPUUtilizationPercentage: 50

  vpa:
    enabled: false
    updateMode: Auto
    minAllowed:
      memory: 128Mi
    maxAllowed:
      cpu: 1
      memory: 512Mi

importer:
  # -- The path to the docker image. Must have a path to your private docker registry
  image: 2gis/selfimporter
  # -- Tag with application version
  tag: v1.0.0

  pullPolicy: IfNotPresent

  # -- Number of parallel import processes (spawned jobs)
  workerNum: 10

  # -- Number of write processes per import process
  writerNum: 8

  nodeSelector: {}
  workerResources: {}

  storage:
    host: s3host.local
    bucket: backet
    accessKey: accessKey
    secretKey: secretKey
