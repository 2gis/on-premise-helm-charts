---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "pasportool.name" $ }}
  labels:
    {{- include "pasportool.labels" $ | nindent 4 }}
data:
  config.yaml: |
    {{- with .Values.license }}
    license:
      path: {{ .path }}
      update-period: {{ .updatePeriod }}
      retry-period: {{ .retryPeriod }}
      warning-period: {{ .softBlockPeriod }}
    {{- end }}
    server:
      host: 0.0.0.0
      port: 80
    {{- with .Values.storage }}
    storage:
      type: s3
      s3:
        host: {{ .host }}
        bucket: {{ .bucket }}
        access-key: {{ .accessKey }}
        secret-key: {{ .secretKey }}
    {{- end -}}
