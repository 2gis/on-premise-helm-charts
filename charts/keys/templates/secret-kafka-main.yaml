{{- if or (eq .Values.kafka.main.securityProtocol "SSL") (eq .Values.kafka.main.securityProtocol "SASL_SSL") }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "keys.name-kafka-main" . | quote }}
  labels:
    {{- include "keys.labels" . | nindent 4 }}
type: Opaque
data:
  client.crt: {{ required "A valid kafka.main.tls.cert entry required" .Values.kafka.main.tls.cert | b64enc | quote }}
  client.key: {{ required "A valid kafka.main.tls.key entry required" .Values.kafka.main.tls.key | b64enc | quote }}
  ca.crt: {{ required "A valid kafka.main.tls.rootCert entry required" .Values.kafka.main.tls.rootCert | b64enc | quote }}
{{- end }}
